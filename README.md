# SmartQC - Project
얼굴 인식 기반 품질 관리 시스템
## 💻 프로젝트 소개
> **얼굴 인식을 기반으로 한 스마트 팩토리 품질 관리 솔루션**
> - ✅ 출퇴근 자동화
> - ✅ 불량품 실시간 감자
> - ✅ MySQL 기반 데이터 기록 및 분석

## 🕰️ 개발 기간
> 25.07.01 ~ 25.07.28
---

## 멤버구성
> 팀장 ( 김철희) : DB 설계 및 연동, C# WPF <br>
> 팀원 ( 박현승 ) : UI 제작, 얼굴 인식 로그인 <br>
> 팀원 ( 서창범 ) : PLC 연동, OpenCV 활용 불량품 검출

## 🗒️ 목차
- [ 🔴 프로젝트 소개](#-프로젝트-소개)
- [ 🔧 기술 스택](#-기술-스택)
- [📷 스크린샷](#-스크린샷)
- [⚙️ 시스템 구조](#-시스템-구조)

  ---

  ## 🔴 프로젝트 소개
  **“SMART QC”란 OPEN CV를 활용한 “얼굴 인식 로그인 시스템”과
  PLC를 활용한 “불량 검출 시스템”을 위하여 만들어진 ‘미니 공정 설계’ 입니다.**

  ---

  ## 🔧 기술 스택
  ![Python]
  ![C#]
  ![MySQL]
  ![OpenCV]

  - **Python** - 얼굴 인식 (OpenCV, InsightFace)
  - **C# WPF** - UI & 관리자 시스템
  - **MySQL** - 데이터 저장 및 관리
  - **YOLO** - 불량품 탐지

  ---

  ## 📷 스크린샷
  - **얼굴 인식 로그인**
  >  <img width="802" height="602" alt="Frame 1" src="https://github.com/user-attachments/assets/40a1c57b-09ec-4cdf-baec-417c826ceaf0" />

- **불량품 감지**
  > <img width="606" height="324" alt="image 8" src="https://github.com/user-attachments/assets/71dd8014-be1f-4ab9-b54c-782ba4a04d40" />
  > <img width="606" height="442" alt="image 9" src="https://github.com/user-attachments/assets/961a2e3f-2827-4147-b2ee-9a618107a4a9" />


---


  ## ⚙️ 시스템 구조
  > ## 🔁 데이터 흐름 <br>
  > 1️⃣ Python **카메라 영상 -> 얼굴 임베딩 -> DB와 비교** <br>
  > 2️⃣ MySQL DB 결과 반환 -> WPF 앱에 로그인 상태 업데이트 <br>
  > 3️⃣ 로그인 성공시 -> 권한별 (관리자 / 사원) 화면 및 기능 제공 <br>
  > 4️⃣ 불량품 감지 시 -> PLC 전송 & DB 기록

---

## ❗ 트러블 슈팅
- **얼굴인식 로그인**
- > **원인**
  > - print().lower().strip() 오류 발생 : print() 함수는 아무 값도 반환하지 않기 때문에
      .lower()를 붙이면 오류 발생
  > - 얼굴 임베딩이 저장되지 않음 :
  >   input()으로 교체해야 사용자 입력을 받아 문자열 처리 가능함

  > **해결**
  > print()는 반환값이 없어 lower() 불가 => input() 사용 필요 : 해상도 낮음, 조도 불안정
  > 얼굴 감지가 안됨 => 임베딩 None => 감지 조건 개선 필요:
    조명 개선, 카메라 위치 조정, 얼굴 인식 범위 또는 해상도 조절
  
- **DB영역**
- > **원인**
  > - C#에서 MySQL 접속 실패 : MySQL 서버 주소에 Private IP를 사용했고, 해당 어플리케이션이
  >   다른 네트워크에 있어 접근 불가. DB 자체가 로컬 네트워크에 제한되어 외부에서 접속
  >   시도 시 실패 발생.
  > - 불량품 정보 DB 저장 오류
  
  > **해결**
  > - Pirvate IP 사용으로 외부 접근 불가 => Public IP 할당, 방화벽 설정, 사용자 권한 %로 설정
  >    : 서버에 고정된 Public IP를 할당하고, 방화벽 설정에서 3306 포트를 외부 접근 가능
  >     하도록 허용. 또한 MySQL 사용자 권한을 'user'@'%'로 설정하여 외부에서 접근 가능하게 구성

- **불량품 판별**
- - > **원인**
    > - 신뢰도 0.3 이하로 객체가 검출됨 : 학습 데이터가 부족했고, 다양한 각도에서 촬영된 이미지가
    >   포함되지 않음
    > - 불량 판별 신호가 반복적으로 전송됨 :
    >   판별 로직이 객체 위치와 관계없이 지속적으로 판별을 수행했기 때문

  -> **해결**
  > - 학습 데이터 부족, 다양한 각도의 병뚜껑 이미지 부재 :
  >   병뚜껑을 여러 각도에서 추가 촬영하고, 좌우 회전, 상하 반전, 밝기 ± 20% 증강을 적용
  > - 객체 위치와 관계 없이 판별 로직이 반복 실행 됨 :
  >   프레임 중심 ± 50px 에 도달 했을 때 '양호 / 불량 판별 및 신호전송'이 가능하도록 로직 수정
  
## ✒️ 향후 개선 계획
  ### 😝 얼굴인식 로그인
  - [ ] 로그 관리 (로그인 시간, 실패 횟수) 등 DB에 추가
  - [ ] 다중 사용자 동시 인식 및 실시간 출입 관리 시스템으로 확장

  ### 📈 DB 영역
  - [ ] 어플리케이션 구조, 데이터 처리 로직 보강

  ### 🪫 불량품 감지
  - [ ] 다양한 내장 함수 추가 ( 실무와 가깝게 진행 )
